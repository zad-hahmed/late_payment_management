<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record id="view_move_form_late_payment" model="ir.ui.view">
            <field name="name">account.move.form.late.payment</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//header" position="inside">
                    <button name="action_send_late_payment_notice"
                            string="Send Late Payment Notice"
                            type="object"
                            class="btn-secondary"
                            invisible="move_type != 'out_invoice' or state != 'posted' or payment_state == 'paid' or not invoice_date_due or not late_alert_sent"/>
                </xpath>

                <xpath expr="//field[@name='invoice_date_due']" position="after">
                    <field name="late_alert_sent"
                           readonly="1"
                           invisible="move_type != 'out_invoice'"/>
                </xpath>
            </field>
        </record>


        <record id="view_move_tree_late_payment" model="ir.ui.view">
            <field name="name">account.move.tree.late.payment</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_out_invoice_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//list" position="inside">
                    <field name="late_alert_sent"
                           string="Late Alert Sent"
                           widget="boolean_toggle"
                           readonly="1"
                           optional="show"/>
                </xpath>
            </field>
        </record>


    </data>
</odoo>
